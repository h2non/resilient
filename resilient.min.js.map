{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","set","data","time","now","value","exists","isObj","isArr","./utils","2","resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","opts","callback","promise","Promise","resolve","reject","emit","requester","apply","err","res","bind","noop","then","catch","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","wrapCallback","once","finalRequestHandler","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver","3","service","timeouts","servers","retry","waitBeforeRetry","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","random","roundRobin","roundRobinSize","balanceStrategy","disableWeight","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","enableSelfRefresh","forceRefreshOnStart","refreshServersInterval","refreshServers","refreshOptions","refreshPath","resilientOptions","4","Servers","Requester","ResilientError","CONCURRENCY","ServersDiscovery","middleware","_middleware","getOptions","getServers","hasDiscoveryServers","updateServersInParallel","buf","sort","pending","counter","onServersUpdateFn","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","slice","forEach","server","index","pool","concat","updateServers","next","fetchServers","params","addTimeStamp","run","handler","total","decrement","reset","extend","qs","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","splice","client","xhr","readyState","closeClient","abort","filter","request","./error","./requester","./servers","5","MESSAGES","1000","1001","1002","1003","1004","1005","1006","1007","status","stack","message","6","Evaluator","strategies","add","strategy","push","eval","some","7","IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","JSON","parse","test","headers","mapOptions","mapRequestBody","defineUserAgent","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http","8","Options","Resilient","CLIENT_VERSION","./client","./defaults","./options","./resilient","9","midware","hooks","Middleware","createPool","use","middlewares","toArr","isFn","map","passArgs","register","type","hook","hooksMiddleware","in","out","mw","10","omit","getRaw","setServers","each","undefined","defaultOptions","keys","11","operation","getOperation","serversList","getServersList","requestNextServer","previousError","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","onRetry","retrier","updateDiscoveryServersAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","v","pop","_sync","unlock","DiscoveryResolver","update","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","toUpperCase","m","trim","isUnavailableStatus","_failStrategies","isErrorStatus","isInvalidStatus","checkResponseStatus","12","EventBus","Sync","cache","_client","_options","list","serversURL","urls","discoveryServers","resetScore","resetStats","latestServers","getUpdatedServers","discoverServers","discoveryOptions","serviceOptions","httpOptions","useHttpClient","restoreHttpClient","serversUpdated","updated","lastUpdate","refresh","mock","mockFn","unmock","failStrategy","addFailStrategy","defineMethodProxy","verb","./cache","./evaluator","./middleware","./resolvers/discovery","./sync","lil-event","13","Resolver","wrapHandler","sync","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServiceServers","getRefreshServers","getRefreshOptions","locked","enqueue","onRefreshServers","lock","dequeue","mErr","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","serversAreUpdated","interval","handleResolution","_cache","getRefreshBasePath","./discovery","14","ServiceResolve","fetch","fetchHandler","../discovery","../error","../requester","./service","15","isCacheEnabled","getCache","name","saveServers","refreshCache","errorHandler","resolveFromCache","resolveWithError","hasValidCache","expires","handleResponse","done","isValidResponse","defineServers","valid","parseAsJSON","../utils","16","roundRobinSerie","size","max","rounds","ps","k","j","rs","17","balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","round","number","toFixed","18","RoundRobin","mapServers","empty","x","y","shuffle","roundRobinSort","find","isValidURI","uri","mapServer","array","Math","temp","configSize","./roundrobin","./server","19","locks","queues","state","getSync","task","queue","20","toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","notEmpty","objIterator","extender","merger","target","iterator","eachArgument","21","22","root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents","23","slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","reduce","lowerField","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","onprogress","requestFactory","24","calls","toArray","runNext","end","remove","nargs"],"mappings":"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"}